!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){e.exports='<section class="content embedded-camera-component {{sip-scan-mode}} {{device-type}}" role="dialog" tabindex="-1" aria-labelledby="embedded-camera-text"> <header class="embedded-camera-header"> <div> <button id="help-button" type="button" class="embedded-camera-header-button" aria-live="off" aria-label="Help button"> <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none" class="embedded-camera-header-help"> <circle cx="12" cy="12" r="10" style="stroke-width:2;stroke:#fff"/> <path d="M12.9 16C12.9 16.5 12.5 17 12 17 11.4 17 11 16.5 11 16 11 15.4 11.4 14.9 12 14.9 12.5 14.9 12.9 15.4 12.9 16Z" class="a"/> <path d="M12.5 13.5L12.7 12.4C14.1 12.2 15.1 11.4 15.1 9.7V9.7C15.1 8 13.9 7 12.2 7 11.9 7 10.7 7 9.2 8.5 9.1 8.6 9.1 8.7 9.1 8.9 9.1 9.3 9.4 9.6 9.8 9.6 9.9 9.6 10 9.6 10.1 9.5 10.1 9.5 10.2 9.5 10.3 9.4 10.6 9.2 11.6 8.5 12.2 8.5 13.1 8.5 13.6 9 13.6 9.8V9.8C13.6 10.6 13 11.1 11.6 11.3 11.3 11.3 11.3 11.5 11.3 11.7 11.3 11.7 11.3 11.7 11.3 11.7 11.3 12.2 11.4 13.3 11.5 13.5 11.5 13.8 11.7 13.9 12 13.9 12.2 13.9 12.4 13.8 12.5 13.5Z" class="a"/> </svg> </button> </div> <div class="embedded-camera-header-title"> <span id="embedded-camera-title">Sip & Scan</span> </div> <div class="embedded-camera-header-cancel"> <button type="button" id="embedded-camera-close" class="embedded-camera-header-button" aria-live="off" aria-label="Close button"> <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"> <path fill-rule="evenodd" clip-rule="evenodd" d="M8.69834 6.9998L13.648 2.0508C14.1173 1.58145 14.1173 0.821362 13.648 0.352012C13.1787 -0.117337 12.4186 -0.117337 11.9493 0.352012L6.9996 5.30181L2.05074 0.352012C1.58141 -0.117337 0.821339 -0.117337 0.352002 0.352012C-0.117334 0.821362 -0.117334 1.58145 0.352002 2.0508L5.30086 6.9998L0.352002 11.9496C-0.117334 12.4189 -0.117334 13.179 0.352002 13.6484C0.586671 13.8831 0.893421 14 1.20097 14C1.50852 14 1.81608 13.8831 2.05074 13.6484L6.9996 8.69859L11.9493 13.6484C12.1839 13.8831 12.4907 14 12.7982 14C13.1058 14 13.4133 13.8831 13.648 13.6484C14.1173 13.179 14.1173 12.4189 13.648 11.9496L8.69834 6.9998Z" fill="white"/> </svg> </button> </div> </header> <aside class="embedded-camera-message"> <div class="embedded-camera-text"> <div class="detection embedded-camera-tip"> Locate the sip & scan icon.<br> Center the sip & scan icon inside the circle.<br> Once it\'s in focus tap the button to scan. </div> <div class="auto-detection embedded-camera-tip hidden">Center a sip &amp; scan<sup>®</sup> icon in the frame</div> <div class="auto-detection embedded-camera-searching hidden">Searching...</div> <div class="auto-detection embedded-camera-unlocking hidden">Icon found! Unlocking...</div> <div class="auto-detection embedded-camera-timeout error-icon hidden">We couldn’t find an icon. Make sure it is centered in the frame and try again.</div> <div class="auto-detection embedded-camera-invalid-icon error-icon hidden">The icon you’ve scanned isn’t valid for this program. Please try another icon.</div> </div> </aside> <div class="embedded-camera-body" aria-label="overlay of camera" role="region" tabindex="0"> <div class="embedded-camera-overlay"> <svg class="detection overlay-mask portrait-mode" preserveAspectRatio="xMidYMid slice" viewBox="0 0 100 217" fill="none" xmlns="http://www.w3.org/2000/svg"> <path class="overlay-mask-fill" d="M0 0V217H100V0ZM20 95a30 30 0 1 1 60 0 30 30 0 1 1-60 0Z"/> <circle cx="50" cy="95" r="30" stroke="#fff" stroke-width="4" fill="transparent" stroke-dashoffset="14.1372" stroke-dasharray="28.2743, 18.8496"></circle> <use href="#svg-sip-scan-icon{{uniqueId}}" class="sip-scan-icon" xlink:href="#svg-sip-scan-icon{{uniqueId}}" fill="#fff" style="transform:scale(.31) translate(0,-43px)" transform-origin="center"></use> </svg> <svg class="detection overlay-mask landscape-mode" preserveAspectRatio="xMidYMid slice" viewBox="0 0 217 100" fill="none" xmlns="http://www.w3.org/2000/svg"> <g transform="translate(0, 100) rotate(-90)"> <path class="overlay-mask-fill" d="M0 0V217H100V0ZM20 95a30 30 0 1 1 60 0 30 30 0 1 1-60 0Z"></path> <circle cx="50" cy="95" r="30" stroke="#fff" stroke-width="4" fill="transparent" stroke-dashoffset="14.1372" stroke-dasharray="28.2743, 18.8496"></circle> </g> <use href="#svg-sip-scan-icon{{uniqueId}}" class="sip-scan-icon" xlink:href="#svg-sip-scan-icon{{uniqueId}}" fill="#fff" style="transform:scale(.31) translate(-43px,0)" transform-origin="center"></use> </svg> <svg class="auto-detection overlay-mask portrait-mode" preserveAspectRatio="xMidYMid slice" viewBox="0 0 100 217" fill="black" xmlns="http://www.w3.org/2000/svg"> <path class="overlay-mask-fill" d="M0 0V217H100V0ZM20 95a30 30 0 1 1 60 0 30 30 0 1 1-60 0Z"></path> <circle cx="50" cy="95" r="35" stroke="rgb(255, 255, 255, .2)" stroke-width="2" fill="transparent" class="spinner-base"></circle> <circle cx="50" cy="95" r="35" stroke="#fff" stroke-width="2" fill="transparent" class="spinner-progress"></circle> <use href="#svg-sip-scan-icon{{uniqueId}}" class="sip-scan-icon" xlink:href="#svg-sip-scan-icon{{uniqueId}}" fill="#fff" style="transform:scale(.31) translate(0,-43px)" transform-origin="center"></use> <path class="warning-icon hidden" d="M11.24 141.676h19.816L42 10.352V0H0v10.352l11.24 131.324zm-9.761 65.366h39.338v-40.521H1.479v40.521z" fill="#fff" style="transform:scale(.11) translate(30px,-117px)" transform-origin="center"></path> </svg> <svg class="auto-detection overlay-mask landscape-mode" preserveAspectRatio="xMidYMid slice" viewBox="0 0 217 100" fill="black" xmlns="http://www.w3.org/2000/svg"> <g transform="translate(0, 100) rotate(-90)"> <path class="overlay-mask-fill" d="M0 0V217H100V0ZM20 95a30 30 0 1 1 60 0 30 30 0 1 1-60 0Z"></path> <circle cx="50" cy="95" r="35" stroke="rgb(255, 255, 255, .2)" stroke-width="2" fill="transparent" class="spinner-base"></circle> <circle cx="50" cy="95" r="35" stroke="#fff" stroke-width="2" fill="transparent" class="spinner-progress"></circle> </g> <use href="#svg-sip-scan-icon{{uniqueId}}" class="sip-scan-icon" xlink:href="#svg-sip-scan-icon{{uniqueId}}" fill="#fff" style="transform:scale(.31) translate(-43px,0)" transform-origin="center"></use> <path class="warning-icon hidden" d="M11.24 141.676h19.816L42 10.352V0H0v10.352l11.24 131.324zm-9.761 65.366h39.338v-40.521H1.479v40.521z" fill="#fff" style="transform:scale(.11) translate(-33px,-51px)" transform-origin="center"></path> </svg> </div> <video id="video" autoplay muted playsinline class="embedded-camera-video"></video> </div> <footer class="embedded-camera-footer embedded-camera-footer-default-device" aria-label="Camera footer" role="region"> <button class="detection camera-btn-link camera-btn" tabindex="0" aria-label="camera button"> <svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="camera-btn-image camera-btn-image-default-device"> <circle cx="50%" cy="50%" r="30" stroke="white" stroke-width="4" fill="none"/> <circle cx="50%" cy="50%" r="27" stroke="black" stroke-width="2" fill="white"/> </svg> </button> <button class="auto-detection camera-btn-retry hidden" tabindex="0"> Retry </button> </footer> <canvas id="canvasDetect" class="hidden"></canvas> </section> '},function(e,t,r){var a;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(function(){var r=function e(t){return t instanceof e?t:this instanceof e?void(this.EXIFwrapped=t):new e(t)};e.exports&&(t=e.exports=r),t.EXIF=r;var i=r.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},c=r.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},s=r.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},d=r.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function u(e){return!!e.exifdata}function l(e,t){function n(n){var r=f(n),a=function(e){var t=new DataView(e);0;if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;var n=2,r=e.byteLength,a=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};for(;n<r;){if(a(t,n)){var o=t.getUint8(n+7);o%2!=0&&(o+=1),0===o&&(o=4);var i=n+8+o,c=t.getUint16(n+6+o);return p(e,i,c)}n++}}(n);e.exifdata=r||{},e.iptcdata=a||{},t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src))n(function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),r=n.length,a=new ArrayBuffer(r),o=new Uint8Array(a),i=0;i<r;i++)o[i]=n.charCodeAt(i);return a}(e.src));else if(/^blob\:/i.test(e.src)){(a=new FileReader).onload=function(e){n(e.target.result)},function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){200!=this.status&&0!==this.status||t(this.response)},n.send()}(e.src,(function(e){a.readAsArrayBuffer(e)}))}else{var r=new XMLHttpRequest;r.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";n(r.response),r=null},r.open("GET",e.src,!0),r.responseType="arraybuffer",r.send(null)}else if(window.FileReader&&(e instanceof window.Blob||e instanceof window.File)){var a;(a=new FileReader).onload=function(e){n(e.target.result)},a.readAsArrayBuffer(e)}}function f(e){var t=new DataView(e);if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;for(var n=2,r=e.byteLength;n<r;){if(255!=t.getUint8(n))return!1;if(225==t.getUint8(n+1))return b(t,n+4,t.getUint16(n+2));n+=2+t.getUint16(n+2)}}var m={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function p(e,t,n){for(var r,a,o,i,c=new DataView(e),s={},d=t;d<t+n;)28===c.getUint8(d)&&2===c.getUint8(d+1)&&(i=c.getUint8(d+2))in m&&((o=c.getInt16(d+3))+5,a=m[i],r=v(c,d+5,o),s.hasOwnProperty(a)?s[a]instanceof Array?s[a].push(r):s[a]=[s[a],r]:s[a]=r),d++;return s}function h(e,t,n,r,a){var o,i,c=e.getUint16(n,!a),s={};for(i=0;i<c;i++)o=n+12*i+2,s[r[e.getUint16(o,!a)]]=g(e,o,t,n,a);return s}function g(e,t,n,r,a){var o,i,c,s,d,u,l=e.getUint16(t+2,!a),f=e.getUint32(t+4,!a),m=e.getUint32(t+8,!a)+n;switch(l){case 1:case 7:if(1==f)return e.getUint8(t+8,!a);for(o=f>4?m:t+8,i=[],s=0;s<f;s++)i[s]=e.getUint8(o+s);return i;case 2:return v(e,o=f>4?m:t+8,f-1);case 3:if(1==f)return e.getUint16(t+8,!a);for(o=f>2?m:t+8,i=[],s=0;s<f;s++)i[s]=e.getUint16(o+2*s,!a);return i;case 4:if(1==f)return e.getUint32(t+8,!a);for(i=[],s=0;s<f;s++)i[s]=e.getUint32(m+4*s,!a);return i;case 5:if(1==f)return d=e.getUint32(m,!a),u=e.getUint32(m+4,!a),(c=new Number(d/u)).numerator=d,c.denominator=u,c;for(i=[],s=0;s<f;s++)d=e.getUint32(m+8*s,!a),u=e.getUint32(m+4+8*s,!a),i[s]=new Number(d/u),i[s].numerator=d,i[s].denominator=u;return i;case 9:if(1==f)return e.getInt32(t+8,!a);for(i=[],s=0;s<f;s++)i[s]=e.getInt32(m+4*s,!a);return i;case 10:if(1==f)return e.getInt32(m,!a)/e.getInt32(m+4,!a);for(i=[],s=0;s<f;s++)i[s]=e.getInt32(m+8*s,!a)/e.getInt32(m+4+8*s,!a);return i}}function v(e,t,r){var a="";for(n=t;n<t+r;n++)a+=String.fromCharCode(e.getUint8(n));return a}function b(e,t){if("Exif"!=v(e,t,4))return!1;var n,r,a,o,u,l=t+6;if(18761==e.getUint16(l))n=!1;else{if(19789!=e.getUint16(l))return!1;n=!0}if(42!=e.getUint16(l+2,!n))return!1;var f=e.getUint32(l+4,!n);if(f<8)return!1;if((r=h(e,l,l+f,c,n)).ExifIFDPointer)for(a in o=h(e,l,l+r.ExifIFDPointer,i,n)){switch(a){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":o[a]=d[a][o[a]];break;case"ExifVersion":case"FlashpixVersion":o[a]=String.fromCharCode(o[a][0],o[a][1],o[a][2],o[a][3]);break;case"ComponentsConfiguration":o[a]=d.Components[o[a][0]]+d.Components[o[a][1]]+d.Components[o[a][2]]+d.Components[o[a][3]]}r[a]=o[a]}if(r.GPSInfoIFDPointer)for(a in u=h(e,l,l+r.GPSInfoIFDPointer,s,n)){switch(a){case"GPSVersionID":u[a]="".concat(u[a][0],".").concat(u[a][1],".").concat(u[a][2],".").concat(u[a][3])}r[a]=u[a]}return r}r.getData=function(e,t){return!((e instanceof Image||e instanceof HTMLImageElement)&&!e.complete)&&(u(e)?t&&t.call(e):l(e,t),!0)},r.getTag=function(e,t){if(u(e))return e.exifdata[t]},r.getIptcTag=function(e,t){if(u(e))return e.iptcdata[t]},r.getAllTags=function(e){if(!u(e))return{};var t,n=e.exifdata,r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r},r.getAllIptcTags=function(e){if(!u(e))return{};var t,n=e.iptcdata,r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r},r.pretty=function(e){if(!u(e))return"";var t,n=e.exifdata,r="";for(t in n)n.hasOwnProperty(t)&&("object"===o(n[t])?n[t]instanceof Number?r+="".concat(t," : ").concat(n[t]," [").concat(n[t].numerator,"/").concat(n[t].denominator,"]\r\n"):r+="".concat(t," : [").concat(n[t].length," values]\r\n"):r+="".concat(t," : ").concat(n[t],"\r\n"));return r},r.readFromBinaryFile=function(e){return f(e)},void 0===(a=function(){return r}.apply(t,[]))||(e.exports=a)}).call(this)},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var a=(i=r,c=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(c),"/*# ".concat(s," */")),o=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(o).concat([a]).join("\n")}var i,c,s;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(r)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(a[i]=!0)}for(var c=0;c<e.length;c++){var s=[].concat(e[c]);r&&a[s[0]]||(n&&(s[2]?s[2]="".concat(n," and ").concat(s[2]):s[2]=n),t.push(s))}},t}},function(e,t,n){n(4),e.exports=n(5)},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof l?t:l,o=Object.create(a.prototype),i=new k(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return A()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=w(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=d(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var u={};function l(){}function f(){}function m(){}var p={};p[a]=function(){return this};var h=Object.getPrototypeOf,g=h&&h(h(C([])));g&&g!==t&&n.call(g,a)&&(p=g);var v=m.prototype=l.prototype=Object.create(p);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,c){var s=d(e[a],e,o);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(l).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(s.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=d(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function C(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=v.constructor=m,m.constructor=f,f.displayName=c(m,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(y.prototype),y.prototype[o]=function(){return this},e.AsyncIterator=y,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new y(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),v[a]=function(){return this},v.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=n(9).default,o=function(){function e(t,n,r,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var c=a.init();this.parameters=t,this.embeddedCamera=new c(n,t,r,o,i)}var t,n,o;return t=e,(n=[{key:"getInitialization",value:function(){return this.parameters}}])&&r(t.prototype,n),o&&r(t,o),e}();!function(e){e.tcccSipScan={SipScanSdk:o}}(window)},function(e,t,n){var r=n(7),a=n(8);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};r(a,o);e.exports=a.locals||{}},function(e,t,n){"use strict";var r,a=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),i=[];function c(e){for(var t=-1,n=0;n<i.length;n++)if(i[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},r=[],a=0;a<e.length;a++){var o=e[a],s=t.base?o[0]+t.base:o[0],d=n[s]||0,u="".concat(s," ").concat(d);n[s]=d+1;var l=c(u),f={css:o[1],media:o[2],sourceMap:o[3]};-1!==l?(i[l].references++,i[l].updater(f)):i.push({identifier:u,updater:g(f,t),references:1}),r.push(u)}return r}function d(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var a=n.nc;a&&(r.nonce=a)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var i=o(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var u,l=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function f(e,t,n,r){var a=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=l(t,a);else{var o=document.createTextNode(a),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(o,i[t]):e.appendChild(o)}}function m(e,t,n){var r=n.css,a=n.media,o=n.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var p=null,h=0;function g(e,t){var n,r,a;if(t.singleton){var o=h++;n=p||(p=d(t)),r=f.bind(null,n,o,!1),a=f.bind(null,n,o,!0)}else n=d(t),r=m.bind(null,n,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=a());var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var a=c(n[r]);i[a].references--}for(var o=s(e,t),d=0;d<n.length;d++){var u=c(n[d]);0===i[u].references&&(i[u].updater(),i.splice(u,1))}n=o}}}},function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r)()(!1);a.push([e.i,".embedded-camera-component {\n  display: flex;\n  justify-content: flex-start;\n  flex-direction: column;\n  align-items: stretch;\n  align-content: stretch;\n  background-color: #000;\n  width: 100%;\n  height: 100%;\n  line-height: 0;\n}\n.embedded-camera-component * {\n  box-sizing: border-box;\n}\n.embedded-camera-component *:focus {\n  outline: none;\n}\n.embedded-camera-component .hidden {\n  display: none;\n}\n.embedded-camera-component.detection-mode .auto-detection {\n  display: none;\n}\n.embedded-camera-component.auto-detection-mode .detection {\n  display: none;\n}\n.embedded-camera-component .embedded-camera-sip-scan-icon {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 100px;\n  transform: translate(-50%, -50%) scale(1);\n}\n.embedded-camera-component .embedded-camera-header {\n  display: flex;\n  align-items: center;\n  border-bottom: 1px solid #2a2a2a;\n  padding: 17px 24px;\n  position: relative;\n  width: 100%;\n}\n.embedded-camera-component .embedded-camera-header-help .a {\n  fill: white;\n}\n.embedded-camera-component .embedded-camera-header-button {\n  background: transparent;\n  border: 0;\n  padding: 1px 7px;\n}\n.embedded-camera-component .embedded-camera-header-title {\n  color: #fff;\n  flex-grow: 1;\n  text-align: center;\n}\n.embedded-camera-component .embedded-camera-header-cancel .close {\n  color: #fff;\n  opacity: 1;\n}\n.embedded-camera-component .embedded-camera-text {\n  color: #fff;\n  font-size: 14px !important;\n  line-height: 1.2;\n  margin: 0 auto;\n}\n.embedded-camera-component .embedded-camera-text .error-icon {\n  text-align: left;\n  padding: 0 36px;\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADuSURBVHgBnZHLTcNAEIb/md1cuOAK0PqG4AIVYDqADugg0EnoACqBdOAT4uYVogAfcspjJzOJ89o4l4xkWf72G2v2H0JXTQiF54shhCr9rDpci8j7Vfz52Hi0lq/DgNyXAAE9pVKcyeKxjL9x1fBf3jb78lzSMyC1J9ccNg3u/V+4ecn/7EAFwSmTLTOHMX1lIhrmI9ihaFPOVX5gfd8dTw2VF0UPr7gHwjEuTwXg9fnGLsb1SEJPjtDKsV9zEhrnNIl8JklvObedcIIfWWSHR9wiu7Q5tsDzFrcp2wlBY6YuObH70XiOyaiMsTW0BCj/Wpsm2hJEAAAAAElFTkSuQmCC');\n  background-position: 0 center;\n  background-repeat: no-repeat;\n}\n.embedded-camera-component .embedded-camera-message {\n  display: flex;\n  padding: 17px 24px;\n  text-align: center;\n  width: 100vw;\n  min-height: 75px;\n}\n.embedded-camera-component .embedded-camera-body {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: stretch;\n  align-content: stretch;\n  overflow: hidden;\n}\n.embedded-camera-component .embedded-camera-video {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  object-fit: cover;\n  opacity: 1;\n}\n.embedded-camera-component .embedded-camera-overlay {\n  overflow: auto;\n  background-repeat: no-repeat;\n  background-size: cover;\n  background-position: center center;\n  width: 100%;\n  flex: 1;\n  z-index: 2;\n}\n.embedded-camera-component .embedded-camera-error {\n  position: absolute;\n  width: 17px;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n}\n.embedded-camera-component .camera-btn {\n  margin: 0 auto;\n  padding: 10px 0;\n}\n.embedded-camera-component .embedded-camera-footer {\n  bottom: 0;\n  z-index: 3;\n  width: 100%;\n  display: flex;\n  position: absolute;\n}\n.embedded-camera-component.default-device .embedded-camera-footer {\n  min-height: 85px;\n}\n.embedded-camera-component.ios-device .embedded-camera-footer {\n  min-height: 115px;\n}\n.embedded-camera-component .camera-btn-link {\n  box-sizing: border-box;\n  position: relative;\n  width: auto;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n}\n.embedded-camera-component .camera-btn {\n  margin: 0 auto;\n  padding: 10px 0;\n  background: transparent;\n  border-color: transparent;\n  display: table;\n}\n.embedded-camera-component .camera-btn-image {\n  display: block;\n  max-height: 65px;\n  width: auto;\n  max-width: 65px;\n}\n.embedded-camera-component.ios-device .camera-btn-image {\n  margin-bottom: 10px;\n}\n.embedded-camera-component .camera-btn-retry,\n.embedded-camera-component .camera-btn-retry:after {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  border-radius: 100%;\n}\n.embedded-camera-component .camera-btn-retry {\n  background-color: #fff;\n  border: none;\n  height: 56px;\n  width: 56px;\n}\n.embedded-camera-component .camera-btn-retry:after {\n  content: \"\";\n  border: 1px solid #fff;\n  width: calc(100% + 8px);\n  height: calc(100% + 8px);\n}\n.embedded-camera-component .canvas-detect {\n  display: none;\n}\n.embedded-camera-component .overlay-mask-fill {\n  fill: rgba(0, 0, 0, 0.7);\n  opacity: 0.5;\n}\n.embedded-camera-component .overlay-mask {\n  width: inherit;\n  height: 100%;\n  position: absolute;\n}\n.embedded-camera-component .modal-open {\n  overflow: hidden;\n}\n.embedded-camera-component .spinner-progress {\n  stroke-dasharray: 275;\n  stroke-dashoffset: 275;\n  transform-origin: center;\n  transition: all 0.5s;\n  stroke-linecap: round;\n}\n.embedded-camera-component .is-spinning .spinner-progress {\n  animation-name: spinProgress;\n  animation-duration: 1.4s;\n  animation-fill-mode: forwards;\n  animation-iteration-count: infinite;\n  animation-timing-function: ease-in-out;\n  stroke-dasharray: 169;\n  stroke-dashoffset: 150;\n  transform-box: fill-box;\n}\n.embedded-camera-component .is-done .spinner-progress {\n  stroke-dasharray: 220;\n  stroke-dashoffset: 0;\n}\n@keyframes spinProgress {\n  0% {\n    transform: rotatez(0deg);\n  }\n  100% {\n    transform: rotatez(360deg);\n  }\n}\n.embedded-camera-component .portrait-mode,\n.embedded-camera-component .landscape-mode {\n  display: none;\n}\n@media (orientation: landscape) {\n  .embedded-camera-component .landscape-mode {\n    display: block;\n  }\n  .embedded-camera-component .embedded-camera-footer {\n    width: 25%;\n    height: 63%;\n    right: 0;\n    align-items: center;\n  }\n}\n@media (orientation: landscape) and (min-width: 1366px) {\n  .embedded-camera-component .embedded-camera-footer {\n    width: 20%;\n    right: 10%;\n    bottom: 10%;\n    align-items: flex-end;\n  }\n}\n@media (orientation: portrait) {\n  .embedded-camera-component .portrait-mode {\n    display: block;\n  }\n}\n@media (orientation: portrait) and (max-height: 667px) {\n  .embedded-camera-component .spinner-base,\n  .embedded-camera-component .spinner-progress {\n    cy: 44%;\n    transform-box: fill-box;\n  }\n  .embedded-camera-component .embedded-camera-error,\n  .embedded-camera-component .detection-hold-message {\n    top: 42%;\n  }\n}\n",""]),t.default=a},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=(n(6),n(1)),i=n.n(o),c=-90*Math.PI/180,s=180*Math.PI/180,d=90*Math.PI/180;function u(e,t,n,r){var a=new Image,o=new Promise((function(e,o){a.onload=function(){var o=function(e,t){var n={};return e.width>e.height?(n.height=t,n.width=t*e.width/e.height):(n.width=t,n.height=t*e.height/e.width),n}(a,t),i=document.createElement("canvas"),u=i.getContext("2d");!function(e,t,n){t&&1!==t&&3!==t?(e.width=n.height,e.height=n.width):(e.width=n.width,e.height=n.height)}(i,r,o),function(e,t,n){switch(t){case 8:e.rotate(c),e.translate(-n.width,0);break;case 3:e.rotate(s),e.translate(-n.width,-n.height);break;case 6:e.rotate(d),e.translate(0,-n.height)}}(u,r,o),u.drawImage(a,0,0,o.width,o.height),e(i.toDataURL("image/jpeg",n))},a.onerror=function(e){o(e)}}));return a.src=e,o}var l={resizeFromFile:function(e,t,n){var r,a=1,o=t&&("number"==typeof(r=t)&&Math.floor(r)===r)&&t>0&&n>=0&&n<=1;return new Promise((function(r,c){o||c(new Error('Parameter "size" must be a positive integer'));var s=new FileReader;s.onload=function(){i.a.getData(e,(function(){var o=s.result;void 0===document.createElement("img").style.imageOrientation&&(a=i.a.getTag(e,"Orientation")),u(o,t,n,a).then((function(e){r(e)}),(function(e){c(e)}))}))},s.readAsDataURL(e),s.onerror=function(e){c(e)}}))},resizeFromBase64:u};var f={isIOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)}};var m={init:function(){var e,t,n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o="sip-scan-sdk-",i="success",c="failure";function s(e){var t=e.name,n=e.eventAction,r=e.eventName,i=e.value,c=e.status;return new CustomEvent("".concat(o).concat(t).concat(a),{detail:{eventAction:n,eventName:r,value:i,status:c}})}function d(){t=new Date,e=e||t}function u(){e=new Date,t=e}function l(){n=new Date}function f(){r=new Date}function m(){return v(e,t)}function p(){return v(e,r)}function h(){return v(e,r)}function g(){return v(e,n)}function v(e,t){return e&&t?t.getTime()-e.getTime():0}function b(e){document.dispatchEvent(e)}function y(){u(),b(s({name:"scan",eventAction:"click",eventName:"scan-now",value:"",status:i}))}function w(){d(),b(s({name:"retry-button",eventAction:"click",eventName:"retry-scan",value:m(),status:i}))}function x(e){f(),b(s({name:"scan-success",eventAction:"scan-".concat(e),eventName:"success",value:p(),status:i}))}function S(e){f(),b(s({name:"scan-failure",eventAction:"scan-".concat(e),eventName:"error - front-end detection",value:h(),status:c}))}function k(){l(),b(s({name:"cancel",eventAction:"click",eventName:"cancel",value:g(),status:i}))}return{clickedScanNow:y,clickedRetry:w,scannedSuccessfully:x,scannedErrorInFrontEnd:S,clickedCancel:k}}},p={};var h={init:function(){var e,t,n,r,a,o,i,c,s,d,u=100,l=200,f=40,m=6,h=1.08,g=2,v="https://static.ccnag.com/content/dam/coca-cola/sip-scan/libs/opencv-lite.min.js";function b(){return"undefined"!=typeof cv&&cv.CascadeClassifier&&cv.Mat&&cv.FS_createDataFile}function y(){return b()?Promise.resolve(!0):new Promise((function(e){var t=setInterval((function(){b()&&(clearInterval(t),e(!0))}),100)}))}function w(){var e=new XMLHttpRequest,t=d.substr(d.lastIndexOf("/")+1);return p[t]&&(c=p[t]),c?Promise.resolve(c):(e.open("GET",d,!0),e.responseType="arraybuffer",new Promise((function(n,r){e.onload=function(){if(4===e.readyState){if(200===e.status){var a=new Uint8Array(e.response);return cv.FS_createDataFile("/",t,a,!0,!1,!1),(c=new cv.CascadeClassifier).load(t),p[t]=c,n(c)}return console.error("Failed to load ".concat(t," status: ").concat(e.status)),r()}return r()},e.send()})))}function x(e){var t,n;for(t=0;t<e.length&&(n=new cv.Size(e[t],e[t]),c.detectMultiScale(o,s,h,g,0,n),!(s.size()>0));t++);}function S(){var e=[],c=u;s=s||new cv.RectVector,i.read(a),cv.cvtColor(a,o,cv.COLOR_BGR2GRAY);do{e.push(c),c+=50}while(c<=l);if(x(e),0!==s.size())if(++r<=m)n(r);else{var d=k(s.get(0));n(r);var f=C(a,d);t(f)}else n(r=0)}function k(e){return e.x-=f,e.y-=f,e.width+=2*f,e.height+=2*f,e}function C(e,t){var n=new ImageData(new Uint8ClampedArray(e.data),e.cols,e.rows),r=-t.x,a=-t.y,o=document.createElement("canvas"),i=o.getContext("2d");return o.width=t.width,o.height=t.height,i.putImageData(n,r,a,t.x,t.y,t.width,t.height),o.toDataURL("image/jpeg")}return{startScanDetection:function(c,p,v,b){return b&&(u=b.minSampleSize,l=b.maxSampleSize,f=b.gutter,h=b.scaleFactor,g=b.minNeighbors,m=b.minSteadyScans,d=b.cascadeClassifierUrl),y().then(w).then((function(){t=p,n=v,function(t){a=new cv.Mat(t.height,t.width,cv.CV_8UC4),o=new cv.Mat(t.height,t.width,cv.CV_8UC1),i=new cv.VideoCapture(t),r=0,s=void 0,e=setInterval(S,1e3/3)}(c)})).catch((function(e){return console.log("Start scan failed ",e),!1}))},fetchDetectionLibs:function(){if(!b()&&!document.getElementById("opencv")&&!function(){if(!window.cv&&window.define&&window.define.amd)return requirejs([v],(function(e){window.cv=e})),!0;return!1}()){var e=document.createElement("script");e.setAttribute("async",""),e.setAttribute("defer",""),e.setAttribute("id","opencv"),e.setAttribute("type","text/javascript"),e.src=v;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}},getCroppedIconFromImage:function(e){var t,n,r=[500,400,300,200,100,1e3,900,800,700,600,1300,1200,1100];return new Promise((function(i){y().then(w).then((function(){var c=document.getElementById("canvasDetect").getContext("2d"),d=new Image;d.onload=function(){return void 0===s&&(s=new cv.RectVector),o=new cv.Mat(c.canvas.height,c.canvas.width,cv.CV_8UC1),a=cv.imread(d),cv.cvtColor(a,o,cv.COLOR_BGR2GRAY),x(r),0===s.size()?(s.delete(),s=new cv.RectVector,i(null)):(t=k(s.get(0)),n=C(a,t),s.delete(),s=new cv.RectVector,i(n))},d.src=e}))}))},stopScanDetection:function(){clearInterval(e)}}}};function g(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){g(o,r,a,i,c,"next",e)}function c(e){g(o,r,a,i,c,"throw",e)}i(void 0)}))}}var b={init:function(){var e,t,n,r,a,o=h.init();function i(e){var t={tip:".auto-detection.embedded-camera-tip",search:".auto-detection.embedded-camera-searching",unlock:".auto-detection.embedded-camera-unlocking",timeoutError:".auto-detection.embedded-camera-timeout.error-icon",invalidError:".auto-detection.embedded-camera-invalid-icon.error-icon"},n=t[e];n&&(delete t[e],s(n),Object.values(t).forEach(c))}function c(e){var t=a.querySelector(e);t&&t.classList.add("hidden")}function s(e){var t=a.querySelector(e);t&&t.classList.remove("hidden")}function d(){var e,t;p(),e=a.querySelectorAll(".sip-scan-icon"),t=a.querySelectorAll(".warning-icon"),e.forEach((function(e){e.classList.add("hidden")})),t.forEach((function(e){e.classList.remove("hidden")})),f(),s(".camera-btn-retry"),i("timeoutError")}function u(){clearTimeout(e),f(),i("unlock")}function l(){var e,t;a.querySelector(".embedded-camera-overlay").classList.remove("is-done"),e=a.querySelectorAll(".sip-scan-icon"),t=a.querySelectorAll(".warning-icon"),e.forEach((function(e){e.classList.remove("hidden")})),t.forEach((function(e){e.classList.add("hidden")})),c(".camera-btn-retry"),m()}function f(){var e=a.querySelector(".embedded-camera-overlay");e.classList.remove("is-spinning"),e.classList.add("is-done")}function m(c,s,u){a=document.querySelector(".content.embedded-camera-component"),r=u||r,t=c&&c.timeout||t,n=s||n,o.fetchDetectionLibs(),a.querySelector(".camera-btn-retry").addEventListener("click",l),i("tip"),e=setTimeout((function(){d()}),1e3*t||15e3),o.startScanDetection(n,g,y,c)}function p(){clearTimeout(e),o.stopScanDetection()}function g(e){return b.apply(this,arguments)}function b(){return(b=v(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(),p(),e.t0=r,e.next=5,o.getCroppedIconFromImage(t);case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){e<=0?i("tip"):e<=6&&(i("search"),document.querySelector(".embedded-camera-overlay").classList.add("is-spinning"))}return{startScan:m,stopScan:p}}};function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){w(o,r,a,i,c,"next",e)}function c(e){w(o,r,a,i,c,"throw",e)}i(void 0)}))}}t.default={init:function(){var e,t,n,r,o,i,c=b.init();function s(){document.dispatchEvent(new Event("sip-scan-sdk-close-embeddedCamera")),n.embeddedReference.innerHTML="",e.pause(),t.getTracks()[0].stop(),n.embeddedReference.setAttribute("style",""),o&&e.removeEventListener("loadedmetadata",g),c.stopScan(),document.body.classList.remove("modal-open")}function d(){document.dispatchEvent(new Event("sip-scan-sdk-open-educationModal".concat(n.uniqueIdentifier)))}function u(){document.dispatchEvent(new Event("sip-scan-sdk-shot-button".concat(n.uniqueIdentifier)));var t=document.createElement("canvas");t.width=e.videoWidth,t.height=e.videoHeight,t.getContext("2d").drawImage(e,0,0,t.width,t.height);var r=t.toDataURL();n.onImageCaptured(r)}function p(e){return h.apply(this,arguments)}function h(){return(h=x(regeneratorRuntime.mark((function e(t){var r,a,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={size:n.parameters.autoDetectionSize||500,quality:n.parameters.autoDetectionQuality||.7},a=r.size,o=r.quality,e.next=4,l.resizeFromBase64(t,a,o);case 4:c=e.sent,i.scannedSuccessfully("auto-detection"),n.successCallback({imageData:c,cameraAccess:!0,imageDetected:!0}),s(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),i.scannedErrorInFrontEnd("auto-detection"),n.errorCallback(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function g(){e.setAttribute("width",e.videoWidth),e.setAttribute("height",e.videoHeight),c.startScan(n.parameters,e,p)}return function(){function c(e,t,r,a,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this.embeddedReference=e,this.parameters=t,this.successCallback=r,this.errorCallback=a,this.uniqueIdentifier=o?"-".concat(o):"",n=this,i=m.init(this.uniqueIdentifier)}var p,h,v,b;return p=c,(h=[{key:"getImageParameters",value:function(){return{size:this.parameters.size||1e3,quality:this.parameters.quality||.7}}},{key:"processImage",value:function(e,t){var n=t?"embedded":"native";i.scannedSuccessfully("".concat(n,"-camera")),this.successCallback({imageData:e,cameraAccess:t,imageDetected:!1}),t&&s()}},{key:"resizeAndProcessImageBase64",value:(b=x(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=this.getImageParameters(),r=n.size,a=n.quality,e.t0=this,e.next=5,l.resizeFromBase64(t,r,a);case 5:e.t1=e.sent,e.t0.processImage.call(e.t0,e.t1,!0),e.next=13;break;case 9:e.prev=9,e.t2=e.catch(0),i.scannedErrorInFrontEnd("embedded-camera"),this.errorCallback(e.t2);case 13:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(e){return b.apply(this,arguments)})},{key:"onImageCaptured",value:function(e){this.resizeAndProcessImageBase64(e)}},{key:"scanFile",value:function(){var e=this,t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","image/*"),t.setAttribute("capture",""),t.style.display="none";var n=document.querySelector("body");n.appendChild(t),t.addEventListener("change",x(regeneratorRuntime.mark((function r(){var a,o,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=e.getImageParameters(),o=a.size,c=a.quality,r.prev=1,r.t0=e,r.next=5,l.resizeFromFile(t.files[0],o,c);case 5:r.t1=r.sent,r.t0.processImage.call(r.t0,r.t1,!1),r.next=13;break;case 9:r.prev=9,r.t2=r.catch(1),i.scannedErrorInFrontEnd("native-camera"),e.errorCallback(r.t2);case 13:t.value="",n.removeChild(t);case 15:case"end":return r.stop()}}),r,null,[[1,9]])})))),t.click()}},{key:"renderCamera",value:function(n,c){var l=this;i.clickedScanNow(),o="auto-detection-mode"===n;var m,p={audio:!1,video:{facingMode:"environment"}};if(!c&&navigator.mediaDevices){var h=setInterval((function(){void 0!==m&&(m||l.scanFile(),clearInterval(h))}),300);navigator.mediaDevices.getUserMedia(p).then((function(c){m=!0,l.embeddedReference.setAttribute("style","width: 100%; height: 100%; margin: 0; overflow: hidden; position: fixed; top: 0; right: 0; left: 0; margin: 0;"),r||function(e,t,n){var o=t?"ios-device":"default-device";r=a.a.replace("{{sip-scan-mode}}",e).replace("{{device-type}}",o).replace(/{{uniqueId}}/g,n)}(n,f.isIOS(),l.uniqueIdentifier),l.embeddedReference.innerHTML=r||a.a,document.body.classList.add("modal-open"),document.querySelector("#help-button").addEventListener("click",d),document.querySelector("#embedded-camera-close").addEventListener("click",s),document.querySelector("#embedded-camera-close").addEventListener("click",i.clickedCancel),document.querySelector(".camera-btn-retry").addEventListener("click",i.clickedRetry),document.querySelector(".camera-btn").addEventListener("click",u),function(n){e=document.getElementById("video"),o&&e.addEventListener("loadedmetadata",g,!1),e.srcObject=n,t=n}(c)}),(function(){m=!1}))}else this.scanFile()}}])&&y(p.prototype,h),v&&y(p,v),c}()}}}]);